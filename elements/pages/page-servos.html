<link rel="import" href="/bower_components/polymer/polymer.html" />
<link rel="import" href="/elements/core/sr-pages.html" />

<polymer-element name="page-servos" extends="sr-page">
    <template>
        <style>
            h1 {
                margin: 15px 15px 5px;
            }

            :host > div {
                margin: 5px 15px 15px;
            }

            div {
                flex: 1 1 auto;
                display: flex;
            }

            div > div {
                flex-direction: column;
                align-items: center;
            }

            input[type=range] {
                flex: 1 1 auto;
                -webkit-appearance: slider-vertical;
                writing-mode: bt-lr;
            }
        </style>

        <h1>Servo Control</h1>

        <div>
            <div>
                <h2>0</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="0" />
                <input type="checkbox" data-servo="0" />
                <span data-servo="0"></span>
            </div>

            <div>
                <h2>1</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="1" />
                <input type="checkbox" data-servo="1" />
                <span data-servo="1"></span>
            </div>

            <div>
                <h2>2</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="2" />
                <input type="checkbox" data-servo="2" />
                <span data-servo="2"></span>
            </div>

            <div>
                <h2>3</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="3" />
                <input type="checkbox" data-servo="3" />
                <span data-servo="0"></span>
            </div>

            <div>
                <h2>4</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="4" />
                <input type="checkbox" data-servo="4" />
                <span data-servo="4"></span>
            </div>

            <div>
                <h2>5</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="5" />
                <input type="checkbox" data-servo="5" />
                <span data-servo="5"></span>
            </div>

            <div>
                <h2>6</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="6" />
                <input type="checkbox" data-servo="6" />
                <span data-servo="6"></span>
            </div>

            <div>
                <h2>7</h2>
                <input type="range" orient="vertical" min="0" max="100" step="0.1" data-servo="7" />
                <input type="checkbox" data-servo="7" />
                <span data-servo="7"></span>
            </div>
        </div>
    </template>

    <script>
        Polymer("page-servos", {
            name: "servos",
            domReady: function() {
                var sliders = this.shadowRoot.querySelectorAll("input[type=range]");
                var checkboxes = this.shadowRoot.querySelectorAll("input[type=checkbox]");
                var spans = this.shadowRoot.querySelectorAll("span[data-servo]");
                for (var i = 0; i < sliders.length; i++) {
                    (function(i) {
                        sliders[i].addEventListener("input", function(e) {
                            spans[i].textContent = e.target.value;
                        });
                    }(i));

                    sliders[i].value = 50;
                    spans[i].textContent = "50";
                }
            },
            sliderChanged: function() {

            }
        });
    </script>
</polymer-element>
