<!--
`sr-core-page` provides a generic page with an online and an offline mode.

Example:

    <sr-core-page name="my-page" online="my-page-online"></sr-core-page>

If `online` or `offline` are omitted, a default message is displayed.

@group SR Core Elements
@element sr-core-page
-->

<link rel="import" href="/bower_components/polymer/polymer.html" />
<link rel="import" href="../wamp/core.html" />

<polymer-element name="sr-core-page" attributes="name online offline">
    <template>
        <style>
            :host {
                flex: 1 1 auto;
                display: flex;
            }

            #content {
                flex: 1 1 auto;
            }
        </style>

        <sr-wamp-core
            id="wamp"
            on-open="{{ handleOpen }}"
            on-close="{{ handleClose }}"></sr-wamp-core>

        <div id="content"></div>
    </template>

    <script>
        Polymer("sr-core-page", {
            online: undefined,
            offline: undefined,
            _createDefaultElement: function(msg) {
                var div = document.createElement("div");
                div.style.display = "flex";
                div.style.justifyContent = "center";
                div.style.alignItems = "center";

                var h1 = document.createElement("h1");
                h1.textContent = msg;
                div.appendChild(h1);

                return div;
            },
            _createConnectedElement: function() {
                if (this.online) {
                    return document.createElement(this.online);
                } else {
                    return this._createDefaultElement("Please turn off the robot.");
                }
            },
            _createDisconnectedElement: function() {
                if (this.offline) {
                    return document.createElement(this.offline);
                } else {
                    return this._createDefaultElement("Please turn on the robot.");
                }
            },
            handleOpen: function() {
                var element = this._createConnectedElement();
                this.shadowRoot.replaceChild(element, this.$.content);
                element.id = "content";
                this.$.content = element;
            },
            handleClose: function() {
                var element = this._createDisconnectedElement();
                this.shadowRoot.replaceChild(element, this.$.content);
                element.id = "content";
                this.$.content = element;
            }
        });
    </script>
</polymer-element>
