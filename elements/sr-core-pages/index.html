<link rel="import" href="/bower_components/polymer/polymer.html" />

<polymer-element name="sr-core-pages">
    <template>
        <style>
            :host {
                display: flex;
                position: relative;
            }
        </style>

        <content></content>
    </template>

    <script>
        Polymer("sr-core-pages", {
            propagateEvent: function(element, type) {
                if (element[type]) {
                    element[type]();
                }

                if (element.children) {
                    for (var i = 0; i < element.children.length; i++) {
                        this.propagateEvent(element.children[i], type);
                    }
                }

                if (element.shadowRoot) {
                    for (var i = 0; i < element.shadowRoot.children.length; i++) {
                        this.propagateEvent(element.shadowRoot.children[i], type);
                    }
                }
            },
            changePage: function(name) {
                console.log("Changing page to:", name);
                var pages = this.children;
                for (var i = 0; i < pages.length; i++) {
                    if (pages[i].name === name) {
                        if (pages[i].hidden) {
                            this.propagateEvent(pages[i], "onPageShow");
                        }
                        pages[i].hidden = false;
                    } else {
                        if (!pages[i].hidden) {
                            this.propagateEvent(pages[i], "onPageHide");
                        }
                        pages[i].hidden = true;
                    }
                }
            }
        });
    </script>
</polymer-element>

<polymer-element name="sr-core-page" attributes="name" noscript>
    <template>
        <style>
            :host {
                display: flex;
                flex-direction: column;
                position: relative;
                overflow: auto;
                flex: 1 1 auto;
            }
        </style>

        <content></content>
    </template>
</polymer-element>
